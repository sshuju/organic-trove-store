<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Detail | OrganicTrove</title>
  <meta name="description" content="Detailed information about our organic, sustainable products at OrganicTrove." />
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
  <header>
    <div class="container header-container">
      <a href="index.html" class="logo">
        Organic<span>Trove</span>
      </a>
      
      <nav class="nav-desktop">
        <a href="index.html">Home</a>
        <div class="dropdown">
          <a href="products.html">Products <i class="fas fa-chevron-down"></i></a>
          <div class="dropdown-menu">
            <a href="products.html">All Products</a>
            <a href="products.html?category=food">Food & Beverages</a>
            <a href="products.html?category=beauty">Beauty & Personal Care</a>
            <a href="products.html?category=home">Home & Living</a>
          </div>
        </div>
        <a href="about.html">About</a>
        <a href="help.html">Help</a>
      </nav>
      
      <div class="nav-actions">
        <button class="icon-button">
          <i class="fas fa-search"></i>
        </button>
        <a href="cart.html" class="icon-button">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count">0</span>
        </a>
        <a href="login.html" class="btn btn-outline btn-desktop" id="signInButton">
          <i class="fas fa-sign-in-alt"></i> Sign In
        </a>
        <button class="nav-mobile-toggle">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
    
    <div class="nav-mobile" id="mobileMenu">
      <a href="index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="about.html">About</a>
      <a href="help.html">Help</a>
      <a href="login.html">Sign In</a>
    </div>
  </header>

  <main>
    <section class="product-detail-section">
      <div class="page-container">
        <div class="breadcrumbs">
          <a href="index.html">Home</a>
          <span class="breadcrumb-separator">/</span>
          <a href="products.html">Products</a>
          <span class="breadcrumb-separator">/</span>
          <a href="#" id="productCategoryLink">Category</a>
          <span class="breadcrumb-separator">/</span>
          <span id="productNameBreadcrumb">Product Name</span>
        </div>
        
        <div class="product-detail-grid" id="productDetail">
          <!-- Product detail will be loaded here via JavaScript -->
          <div class="loading">Loading product details...</div>
        </div>
        
        <div class="product-tabs">
          <div class="tabs-header">
            <button class="tab-button active" data-tab="description">Description</button>
            <button class="tab-button" data-tab="details">Details & Specs</button>
            <button class="tab-button" data-tab="reviews">Reviews</button>
          </div>
          
          <div class="tab-content" id="tabContent">
            <div id="descriptionTab">
              <h3>Product Description</h3>
              <div id="productFullDescription"></div>
            </div>
          </div>
        </div>
        
        <div class="section-title" style="margin-top: 4rem;">
          <h2>You May Also Like</h2>
        </div>
        
        <div class="product-grid" id="relatedProducts">
          <!-- Related products will be loaded here -->
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div class="footer-column">
          <a href="index.html" class="logo">
            Organic<span>Trove</span>
          </a>
          <p style="margin: 1rem 0; font-size: 0.875rem; color: hsl(110, 5%, 45%);">
            Committed to providing 100% organic, sustainable, and zero-waste products for a healthier you and a healthier planet.
          </p>
          <div class="footer-social">
            <a href="#" class="social-icon">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="fab fa-youtube"></i>
            </a>
          </div>
        </div>
        
        <div class="footer-column">
          <h3>Quick Links</h3>
          <ul class="footer-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="help.html">Help & Support</a></li>
            <li><a href="login.html">My Account</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Categories</h3>
          <ul class="footer-links">
            <li><a href="products.html?category=food">Food & Beverages</a></li>
            <li><a href="products.html?category=beauty">Beauty & Personal Care</a></li>
            <li><a href="products.html?category=home">Home & Living</a></li>
            <li><a href="products.html?category=wellness">Health & Wellness</a></li>
            <li><a href="products.html?category=gifts">Gift Sets</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Contact Us</h3>
          <ul class="footer-contact">
            <li>
              <div class="footer-contact-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <div class="footer-contact-text">
                123 Organic Lane, Green City, Karnataka, India - 560001
              </div>
            </li>
            <li>
              <div class="footer-contact-icon">
                <i class="fas fa-phone-alt"></i>
              </div>
              <div class="footer-contact-text">
                +91 98765 43210
              </div>
            </li>
            <li>
              <div class="footer-contact-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <div class="footer-contact-text">
                hello@organictrove.in
              </div>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p class="footer-copyright">
          &copy; <span id="currentYear"></span> OrganicTrove. All rights reserved.
        </p>
        <div class="footer-legal">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Shipping Policy</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Sign In Required Modal -->
  <div class="signin-overlay" id="signinOverlay"></div>
  <div class="signin-required" id="signinRequired">
    <h3>Sign In Required</h3>
    <p>Please sign in to add items to your cart and make purchases.</p>
    <a href="login.html" class="btn btn-primary">Sign In Now</a>
    <button class="btn btn-outline" style="margin-top: 0.5rem;" onclick="closeSigninModal()">Cancel</button>
  </div>

  <script>
    // Sample product data (same as products.html for consistency)
    const products = [
      {
        id: 1,
        name: "Organic Honey",
        description: "Pure, raw honey from organically raised bees without antibiotics or pesticides.",
        fullDescription: "Our organic honey is harvested from hives placed in pristine organic farms free from pesticides and chemicals. The bees are never treated with antibiotics, and the honey is minimally processed to retain all of its natural enzymes, antioxidants, and beneficial properties. With its rich amber color and distinctive floral notes, this honey is perfect for sweetening tea, drizzling over yogurt, or spreading on toast.",
        price: 349,
        imageSrc: "https://images.unsplash.com/photo-1587049352851-8d4e89133924?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
        category: "food",
        isNew: true,
        isBestSeller: false,
        weight: "250g",
        origin: "Western Ghats, India",
        organic: true,
        images: [
          "https://images.unsplash.com/photo-1587049352851-8d4e89133924?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          "https://images.unsplash.com/photo-1471943311424-646960669fbc?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          "https://images.unsplash.com/photo-1559056199-641a0ac8b55e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
        ]
      },
      {
        id: 2,
        name: "Natural Face Serum",
        description: "Made with organic plant extracts to hydrate and rejuvenate your skin.",
        fullDescription: "Our natural face serum is formulated with a blend of organic botanical extracts, vitamins, and essential oils to nourish and revitalize your skin. Key ingredients include hyaluronic acid for deep hydration, vitamin C for brightening, and rosehip oil to reduce fine lines. The lightweight, non-greasy formula absorbs quickly and works for all skin types. Free from parabens, sulfates, and synthetic fragrances.",
        price: 899,
        imageSrc: "https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
        category: "beauty",
        isNew: false,
        isBestSeller: true,
        volume: "30ml",
        skinType: "All skin types",
        vegan: true,
        images: [
          "https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          "https://images.unsplash.com/photo-1570194065650-d99fb4cd5150?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          "https://images.unsplash.com/photo-1631729371254-42c2892f0e6e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
        ]
      }
      // Add more products as needed with similar details
    ];
    
    // Get product ID from URL
    function getProductId() {
      const urlParams = new URLSearchParams(window.location.search);
      const id = parseInt(urlParams.get('id'));
      return isNaN(id) ? 1 : id; // Default to first product if ID is invalid
    }
    
    // Load product details
    function loadProductDetails() {
      const productId = getProductId();
      const product = products.find(p => p.id === productId) || products[0];
      
      // Format price in Indian Rupees
      const formattedPrice = product.price.toLocaleString('en-IN');
      
      // Update page title
      document.title = `${product.name} | OrganicTrove`;
      
      // Update breadcrumbs
      document.getElementById('productCategoryLink').textContent = product.category.charAt(0).toUpperCase() + product.category.slice(1);
      document.getElementById('productCategoryLink').href = `products.html?category=${product.category}`;
      document.getElementById('productNameBreadcrumb').textContent = product.name;
      
      // Build product detail HTML
      const productDetailHtml = `
        <div class="product-gallery">
          <div class="product-main-image">
            <img id="mainProductImage" src="${product.images ? product.images[0] : product.imageSrc}" alt="${product.name}" onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1545127398-14699f92334b?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80';">
          </div>
          ${product.images ? `
            <div class="product-thumbnails">
              ${product.images.map((img, index) => `
                <div class="product-thumbnail ${index === 0 ? 'active' : ''}" onclick="changeMainImage(event, '${img}', this)">
                  <img src="${img}" alt="${product.name} image ${index + 1}" onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1545127398-14699f92334b?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80';">
                </div>
              `).join('')}
            </div>
          ` : ''}
        </div>
        <div class="product-info">
          <div class="product-info-header">
            <div class="product-badges">
              ${product.isNew ? '<span class="badge badge-new">New</span>' : ''}
              ${product.isBestSeller ? '<span class="badge badge-bestseller">Best Seller</span>' : ''}
            </div>
            <h1 class="product-info-title">${product.name}</h1>
            <div class="product-info-price"><span class="currency-symbol">₹</span>${formattedPrice}</div>
            <div class="product-info-description">${product.description}</div>
          </div>
          
          <div class="product-form">
            <div class="form-group">
              <label for="quantity">Quantity</label>
              <div class="quantity-input">
                <button type="button" class="quantity-btn" onclick="decrementQuantity()">-</button>
                <input type="text" id="quantity" class="quantity-value" value="1" readonly>
                <button type="button" class="quantity-btn" onclick="incrementQuantity()">+</button>
              </div>
            </div>
            
            <div class="product-actions">
              <button class="btn btn-primary add-to-cart-btn" onclick="handleAddToCart(${product.id})">
                <i class="fas fa-shopping-cart"></i> Add to Cart
              </button>
            </div>
          </div>
          
          <div class="product-meta">
            <p><span>Category:</span> ${product.category.charAt(0).toUpperCase() + product.category.slice(1)}</p>
            ${product.weight ? `<p><span>Weight:</span> ${product.weight}</p>` : ''}
            ${product.volume ? `<p><span>Volume:</span> ${product.volume}</p>` : ''}
            ${product.origin ? `<p><span>Origin:</span> ${product.origin}</p>` : ''}
            ${product.skinType ? `<p><span>Skin Type:</span> ${product.skinType}</p>` : ''}
            ${product.organic ? `<p><span>Organic:</span> Yes</p>` : ''}
            ${product.vegan ? `<p><span>Vegan:</span> Yes</p>` : ''}
          </div>
        </div>
      `;
      
      // Update product detail section
      document.getElementById('productDetail').innerHTML = productDetailHtml;
      
      // Update full description
      document.getElementById('productFullDescription').innerHTML = product.fullDescription || product.description;
      
      // Load related products (simple demo - just show other products from same category)
      loadRelatedProducts(product.category, product.id);
    }
    
    // Load related products
    function loadRelatedProducts(category, currentProductId) {
      const relatedProducts = products
        .filter(p => p.category === category && p.id !== currentProductId)
        .slice(0, 4); // Show max 4 related products
      
      if (relatedProducts.length === 0) {
        // If no products in same category, show any other products
        relatedProducts.push(...products.filter(p => p.id !== currentProductId).slice(0, 4));
      }
      
      const relatedProductsHtml = relatedProducts.map(product => {
        // Format price in Indian Rupees
        const formattedPrice = product.price.toLocaleString('en-IN');
        
        return `
          <div class="product-card">
            <a href="product.html?id=${product.id}" class="card-link"></a>
            <div class="product-image">
              <img src="${product.imageSrc}" alt="${product.name}" onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1545127398-14699f92334b?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80'; this.classList.add('error');">
              <div class="product-badges">
                ${product.isNew ? '<span class="badge badge-new">New</span>' : ''}
                ${product.isBestSeller ? '<span class="badge badge-bestseller">Best Seller</span>' : ''}
              </div>
            </div>
            <div class="product-details">
              <div class="product-category">${product.category.charAt(0).toUpperCase() + product.category.slice(1)}</div>
              <h3 class="product-title">${product.name}</h3>
              <p class="product-description">${product.description}</p>
              <div class="product-footer">
                <div class="product-price"><span class="currency-symbol">₹</span>${formattedPrice}</div>
                <button class="btn-add" onclick="handleAddToCart(event, ${product.id})">
                  <i class="fas fa-shopping-cart"></i> Add
                </button>
              </div>
            </div>
          </div>
        `;
      }).join('');
      
      document.getElementById('relatedProducts').innerHTML = relatedProductsHtml;
    }
    
    // Change main product image
    function changeMainImage(event, imageSrc, thumbnailElement) {
      event.preventDefault();
      document.getElementById('mainProductImage').src = imageSrc;
      
      // Update active thumbnail
      document.querySelectorAll('.product-thumbnail').forEach(thumb => {
        thumb.classList.remove('active');
      });
      thumbnailElement.classList.add('active');
    }
    
    // Quantity controls
    function incrementQuantity() {
      const quantityInput = document.getElementById('quantity');
      const currentValue = parseInt(quantityInput.value, 10);
      if (currentValue < 10) { // Set a reasonable maximum
        quantityInput.value = currentValue + 1;
      }
    }
    
    function decrementQuantity() {
      const quantityInput = document.getElementById('quantity');
      const currentValue = parseInt(quantityInput.value, 10);
      if (currentValue > 1) {
        quantityInput.value = currentValue - 1;
      }
    }
    
    // Handle adding product to cart
    function handleAddToCart(productId) {
      // Check if user is signed in
      if (!isUserSignedIn()) {
        showSigninModal();
        return;
      }
      
      // Find the product
      const product = products.find(p => p.id === productId);
      if (!product) return;
      
      // Get quantity
      const quantity = parseInt(document.getElementById('quantity')?.value || 1, 10);
      
      // Get existing cart items
      const cartItems = JSON.parse(localStorage.getItem('cartItems') || '[]');
      
      // Check if product is already in cart
      const existingItemIndex = cartItems.findIndex(item => item.id === productId);
      
      if (existingItemIndex !== -1) {
        // Increase quantity if already in cart
        cartItems[existingItemIndex].quantity += quantity;
      } else {
        // Add new item to cart
        cartItems.push({
          id: product.id,
          name: product.name,
          price: product.price,
          quantity: quantity,
          imageSrc: product.imageSrc
        });
      }
      
      // Save updated cart to localStorage
      localStorage.setItem('cartItems', JSON.stringify(cartItems));
      
      // Update cart count
      updateCartCount();
      
      // Show confirmation notification
      showNotification(`${product.name} added to cart!`);
    }
    
    // Tab switching
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('click', function() {
        // Remove active class from all buttons
        document.querySelectorAll('.tab-button').forEach(btn => {
          btn.classList.remove('active');
        });
        
        // Add active class to clicked button
        this.classList.add('active');
        
        // Get the tab to show
        const tabId = this.getAttribute('data-tab');
        
        // For demo, we just keep showing the description tab
        // In a real application, you would toggle visibility of different tab contents
      });
    });
    
    // Check if user is signed in
    function isUserSignedIn() {
      return localStorage.getItem('isSignedIn') === 'true';
    }
    
    // Show sign in modal
    function showSigninModal() {
      document.getElementById('signinOverlay').classList.add('show');
      document.getElementById('signinRequired').classList.add('show');
    }
    
    // Close sign in modal
    function closeSigninModal() {
      document.getElementById('signinOverlay').classList.remove('show');
      document.getElementById('signinRequired').classList.remove('show');
    }
    
    // Show notification
    function showNotification(message) {
      // Create notification element if it doesn't exist
      let notification = document.getElementById('notification');
      if (!notification) {
        notification = document.createElement('div');
        notification.id = 'notification';
        notification.className = 'notification notification-success';
        notification.innerHTML = `
          <div class="notification-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="notification-content">
            <div class="notification-message"></div>
          </div>
          <button class="notification-close" onclick="this.parentNode.classList.remove('show')">
            <i class="fas fa-times"></i>
          </button>
        `;
        document.body.appendChild(notification);
      }
      
      // Update message and show
      notification.querySelector('.notification-message').textContent = message;
      notification.classList.add('show');
      
      // Auto-hide after 3 seconds
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }
    
    // Update cart count
    function updateCartCount() {
      const cartItems = JSON.parse(localStorage.getItem('cartItems') || '[]');
      const count = cartItems.reduce((total, item) => total + item.quantity, 0);
      
      const cartCountElements = document.querySelectorAll('.cart-count');
      cartCountElements.forEach(element => {
        element.textContent = count;
      });
    }
    
    // Update sign in button based on login status
    function updateSignInButton() {
      const signInButton = document.getElementById('signInButton');
      if (isUserSignedIn()) {
        signInButton.innerHTML = '<i class="fas fa-sign-out-alt"></i> Sign Out';
        signInButton.href = 'javascript:void(0)';
        signInButton.onclick = function() {
          localStorage.removeItem('isSignedIn');
          updateSignInButton();
          updateCartCount();
          showNotification('Signed out successfully');
        };
      } else {
        signInButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Sign In';
        signInButton.href = 'login.html';
        signInButton.onclick = null;
      }
    }
    
    // Mobile menu toggle
    document.querySelector('.nav-mobile-toggle').addEventListener('click', function() {
      document.getElementById('mobileMenu').classList.toggle('open');
    });
    
    // Set current year in footer
    document.getElementById('currentYear').textContent = new Date().getFullYear();
    
    // Initialize on page load
    window.addEventListener('DOMContentLoaded', function() {
      loadProductDetails();
      updateCartCount();
      updateSignInButton();
    });
  </script>
</body>
</html>
